<div class="custom-comparison vergleichstabelle-new" style="background-color: {{ section.settings.bg_color }};">
  <div class="page-width">
    <h2 class="vergleichs-ueberschrift rich-text__heading h1" style="text-align: {{ section.settings.ueberschrift_alignment }};">
      {{ section.settings.ueberschrift_text }}
    </h2>

    <!-- Responsive Table Design for both Desktop and Mobile -->
    <div class="table-wrapper">
      <table class="vergleichstabelle">
        <thead class="produkte-row sticky-header">
          <tr>
            <th class="feature-header">Eigenschaften</th>
            <th class="produkt-header">
              {% if section.settings.vergleichsbild_links %}
                <img src="{{ section.settings.vergleichsbild_links | image_url: width: 120 }}" alt="Produkt 1" class="vergleichsbild">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_links }}</div>
            </th>
            <th class="produkt-header">
              {% if section.settings.vergleichsbild_rechts %}
                <img src="{{ section.settings.vergleichsbild_rechts | image_url: width: 120 }}" alt="Produkt 2" class="vergleichsbild">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_rechts }}</div>
            </th>
          </tr>
        </thead>
        <tbody>
          {% for block in section.blocks %}
            <tr class="vergleichs-row {% cycle 'zebra-row', '' %}" style="background-color: {% cycle section.settings.zebra_color, 'transparent' %};">
              <td class="vorteil">{{ block.settings.text_links }}</td>
              <td class="icon-cell" data-label="{{ section.settings.produktname_links }}">
                {% if block.settings.icon_links %}
                  <span class="icon check"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6b8f71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check"><path d="M20 6 9 17l-5-5"/></svg></span>
                {% else %}
                  <span class="icon cross"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></span>
                {% endif %}
              </td>
              <td class="icon-cell" data-label="{{ section.settings.produktname_rechts }}">
                {% if block.settings.icon_rechts %}
                  <span class="icon check"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6b8f71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check"><path d="M20 6 9 17l-5-5"/></svg></span>
                {% else %}
                  <span class="icon cross"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .vergleichstabelle-new {
    padding: 40px 0;
  }

  .vergleichs-ueberschrift {
    margin-bottom: 2rem;
    font-size: 28px;
  }

  .table-wrapper {
    overflow-x: auto;
    margin-bottom: 20px;
  }

  .vergleichstabelle {
    width: 100%;
    border-collapse: collapse;
    text-align: left;
    border-radius: 8px;
    overflow: hidden;
  }

  .sticky-header {
    position: sticky;
    top: 0;
    background-color: {{ section.settings.bg_color }};
    z-index: 10;
  }

  .produkte-row th:first-child {
    text-align: left;
  }


  .produkte-row th {
    text-align: center;
    padding: 16px 12px;
    vertical-align: bottom;
    word-break: break-word;
    hyphens: auto;
  }

  .icon.check,
  .icon.cross {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .feature-header {
    text-align: left;
    font-weight: 600;
    font-size: 18px;
  }

  .vergleichsbild {
    margin: 0 auto 8px auto;
    height: auto;
    max-height: 100px;
    width: auto;
    display: block;
  }

  .produktname {
    font-weight: 600;
    font-size: 16px;
  }

  .vergleichs-row td {
    padding: 14px 12px;
    font-size: 16px;
    vertical-align: middle;
  }

  .icon-cell {
    text-align: center;
    font-size: 20px;
  }

  .icon.check {
    color: #2e7d32;
  }

  .icon.cross {
    color: #c62828;
  }

  .vorteil {
    font-weight: 500;
  }

  .zebra-row {
    background-color: {{ section.settings.zebra_color }};
  }

  /* Responsive styles */
  @media screen and (max-width: 768px) {
    .vergleichstabelle-new {
      padding: 30px 0;
    }
    
    .vergleichs-ueberschrift {
      font-size: 24px;
      margin-bottom: 1.5rem;
    }
    
    .vergleichstabelle {
      border-radius: 6px;
      table-layout: fixed;
    }
    
    .feature-header {
      width: 48%;
      font-size: 14px;
    }
    
    .produkt-header {
      width: 26%;
    }
    
    .vergleichsbild {
      max-height: 70px;
    }
    
    .vergleichs-row td {
      padding: 12px 8px;
      font-size: 14px;
    }
    
    .vorteil {
      font-size: 14px;
    }
    
    .produktname {
      font-size: 14px;
    }
  }
  
  /* Very small mobile styles */
  @media screen and (max-width: 480px) {
    .feature-header {
      width: 46%;
    }
    
    .produkt-header {
      width: 27%;
    }
    
    .vergleichsbild {
      max-height: 60px;
    }
    
    .produktname {
      font-size: 13px;
    }
    
    .vergleichs-row td {
      padding: 10px 6px;
      font-size: 13px;
    }
    
    .icon-cell {
      font-size: 16px;
    }
  }
</style>

{% schema %}
{
  "name": "Vergleichstabelle NEW",
  "settings": [
    {
      "type": "text",
      "id": "ueberschrift_text",
      "label": "Überschrift",
      "default": "Was unser Futter besonders macht"
    },
    {
      "type": "select",
      "id": "ueberschrift_alignment",
      "label": "Ausrichtung der Überschrift",
      "options": [
        { "value": "left", "label": "Links" },
        { "value": "center", "label": "Zentriert" },
        { "value": "right", "label": "Rechts" }
      ],
      "default": "center"
    },
    {
      "type": "image_picker",
      "id": "vergleichsbild_links",
      "label": "Bild links"
    },
    {
      "type": "image_picker",
      "id": "vergleichsbild_rechts",
      "label": "Bild rechts"
    },
    {
      "type": "text",
      "id": "produktname_links",
      "label": "Produktname links",
      "default": "Uncle Rusty's"
    },
    {
      "type": "text",
      "id": "produktname_rechts",
      "label": "Produktname rechts",
      "default": "Herkömmliches Futter"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Hintergrundfarbe der Sektion",
      "default": "#fefdf7"
    },
    {
      "type": "color",
      "id": "zebra_color",
      "label": "Hintergrundfarbe (abwechselnde Zeilen)",
      "default": "#fcefe5"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Vergleichspunkt",
      "settings": [
        {
          "type": "text",
          "id": "text_links",
          "label": "Vergleichspunkt (Beschreibung)"
        },
        {
          "type": "checkbox",
          "id": "icon_links",
          "label": "Haken links",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "icon_rechts",
          "label": "Haken rechts",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Vergleichstabelle Responsive",
      "category": "Custom",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "text_links": "100 % Deklaration aller Zutaten",
            "icon_links": true,
            "icon_rechts": false
          }
        },
        {
          "type": "feature",
          "settings": {
            "text_links": "Muskel- statt Tiermehl",
            "icon_links": true,
            "icon_rechts": false
          }
        }
      ]
    }
  ]
}
{% endschema %}