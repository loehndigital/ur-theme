<div class="custom-comparison vergleichstabelle-new" style="background-color: {{ section.settings.bg_color }};">
  <div class="page-width">
    <h2 class="vergleichs-ueberschrift rich-text__heading h1" style="text-align: {{ section.settings.ueberschrift_alignment }};">
      {{ section.settings.ueberschrift_text }}
    </h2>

    <!-- Desktop Tabelle -->
    <div class="table-wrapper table-desktop">
      <table class="vergleichstabelle">
        <thead class="produkte-row sticky-header">
          <tr>
            <th></th>
            <th class="produkt-header">
              {% if section.settings.vergleichsbild_links %}
                <img src="{{ section.settings.vergleichsbild_links | image_url: width: 120 }}" alt="Produkt 1" class="vergleichsbild">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_links }}</div>
            </th>
            <th class="produkt-header">
              {% if section.settings.vergleichsbild_rechts %}
                <img src="{{ section.settings.vergleichsbild_rechts | image_url: width: 120 }}" alt="Produkt 2" class="vergleichsbild">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_rechts }}</div>
            </th>
          </tr>
        </thead>
        <tbody>
          {% for block in section.blocks %}
            <tr class="vergleichs-row {% cycle 'zebra-row', '' %}" style="background-color: {% cycle section.settings.zebra_color, 'transparent' %};">
              <td class="vorteil">{{ block.settings.text_links }}</td>
              <td class="icon-cell">
                {% if block.settings.icon_links %}<span class="icon check">✔️</span>{% else %}<span class="icon cross">❌</span>{% endif %}
              </td>
              <td class="icon-cell">
                {% if block.settings.icon_rechts %}<span class="icon check">✔️</span>{% else %}<span class="icon cross">❌</span>{% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Mobile Cards -->
    <div class="table-mobile">
      {% for block in section.blocks %}
        <div class="vergleich-card" style="background-color: {% cycle section.settings.zebra_color, 'transparent' %};">
          <div class="vorteil-text">{{ block.settings.text_links }}</div>
          <div class="vergleich-card-row">
            <div class="vergleich-card-col">
              {% if section.settings.vergleichsbild_links %}
                <img src="{{ section.settings.vergleichsbild_links | image_url: width: 60 }}" class="vergleichsbild-mobile" alt="{{ section.settings.produktname_links }}">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_links }}</div>
              <span class="icon {% if block.settings.icon_links %}check{% else %}cross{% endif %}">
                {% if block.settings.icon_links %}✔️{% else %}❌{% endif %}
              </span>
            </div>
            <div class="vergleich-card-col">
              {% if section.settings.vergleichsbild_rechts %}
                <img src="{{ section.settings.vergleichsbild_rechts | image_url: width: 60 }}" class="vergleichsbild-mobile" alt="{{ section.settings.produktname_rechts }}">
              {% endif %}
              <div class="produktname">{{ section.settings.produktname_rechts }}</div>
              <span class="icon {% if block.settings.icon_rechts %}check{% else %}cross{% endif %}">
                {% if block.settings.icon_rechts %}✔️{% else %}❌{% endif %}
              </span>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .table-desktop { display: table; }
  .table-mobile { display: none; }

  @media screen and (max-width: 768px) {
    .table-desktop { display: none; }
    .table-mobile { display: block; }
  }

  .vergleich-card-row {
    display: flex;
    justify-content: space-between;
    gap: 10px;
  }

  .vergleich-card-col {
    flex: 1;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .vergleichsbild-mobile {
    max-height: 40px;
    margin: 0 auto;
  }

  .icon.check { color: #2e7d32; font-size: 20px; }
  .icon.cross { color: #c62828; font-size: 20px; }
</style>

{% schema %}
{
  "name": "Vergleichstabelle NEW",
  "settings": [
    { "type": "text", "id": "ueberschrift_text", "label": "Überschrift", "default": "Was unser Futter besonders macht" },
    { "type": "select", "id": "ueberschrift_alignment", "label": "Ausrichtung der Überschrift", "options": [
      { "value": "left", "label": "Links" },
      { "value": "center", "label": "Zentriert" },
      { "value": "right", "label": "Rechts" }
    ], "default": "center" },
    { "type": "image_picker", "id": "vergleichsbild_links", "label": "Bild links" },
    { "type": "image_picker", "id": "vergleichsbild_rechts", "label": "Bild rechts" },
    { "type": "text", "id": "produktname_links", "label": "Produktname links", "default": "Uncle Rusty's" },
    { "type": "text", "id": "produktname_rechts", "label": "Produktname rechts", "default": "Herkömmliches Futter" },
    { "type": "color", "id": "bg_color", "label": "Hintergrundfarbe der Sektion", "default": "#fefdf7" },
    { "type": "color", "id": "zebra_color", "label": "Hintergrundfarbe (abwechselnde Zeilen)", "default": "#fcefe5" }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Vergleichspunkt",
      "settings": [
        { "type": "text", "id": "text_links", "label": "Vergleichspunkt (Beschreibung)" },
        { "type": "checkbox", "id": "icon_links", "label": "Haken links", "default": true },
        { "type": "checkbox", "id": "icon_rechts", "label": "Haken rechts", "default": false }
      ]
    }
  ],
  "presets": [
    {
      "name": "Vergleichstabelle NEW",
      "category": "Custom"
    }
  ]
}
{% endschema %}